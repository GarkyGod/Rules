# Shadowrocket: 2022-02-12
#
# 通用配置
#
[General]
// 全局忽略配置
bypass-system = true
// 指定域名或IP不被代理
skip-proxy = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, localhost, *.local, captive.apple.com
// 指定域名或IP不被TUN interface轉發
bypass-tun = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.0.0/16, 198.18.0.0/15, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32
// 指定IOS設備所使用的域名解析服務器
dns-server = system, 1.1.1.1, 1.0.0.1, 8.8.8.8, 8.8.4.4
//
ipv6 = true
# update-url = //10.1.1.1/MG.conf

#
# 過濾規則
#
[Rule]
#
# 規則有：DOMAIN(精確域名匹配)、DOMAIN-SUFFIX(域名後綴匹配)、DOMAIN-KEYWORD(域名關鍵字匹配)、GEOIP(地理位置匹配)、IP-CIDR(IP地址無類匹配)、FINAL(最終匹配,必須放最後)六種
# 規則行為包括：代理(PROXY)、不代理(DIRECT)、丢弃(REJECT)三種
# 規則配置高級選項「no-resolve」(在GEOIP 和 IP-CIDR 配置,忽略規則與域解析請求)「Force Remote DNS」(解決本地DNS解析受污染問題,針對Google、Twitter的規則)
#

#自定義常用代理
// Customize
DOMAIN-SUFFIX,quanben,PROXY

//國內IP
GEOIP,CN,DIRECT

//直連域名
DOMAIN-SET,https://raw.githubusercontent.com/Loyalsoldier/surge-rules/release/direct.txt,DIRECT
# 備用RULE-SET,https://raw.githubusercontent.com/Loyalsoldier/surge-rules/release/ruleset/direct.txt,DIRECT

// 攔截去廣告 用anti-AD每天更新的內容
DOMAIN-SET,https://anti-ad.net/surge2.txt,REJECT
# 備用DOMAIN-SET,https://raw.githubusercontent.com/privacy-protection-tools/anti-AD/master/anti-ad-surge2.txt,REJECT

// GFW代理 使用https://github.com/Loyalsoldier/surge-rules內每天更新內容
DOMAIN-SET,https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/gfw.txt,PROXY,force-remote-dns
# 備用RULE-SET,https://raw.githubusercontent.com/Loyalsoldier/surge-rules/release/ruleset/gfw.txt,PROXY,force-remote-dns
# 備用RULE-SET,https://raw.githubusercontent.com/Loyalsoldier/surge-rules/release/ruleset/proxy.txt,PROXY
# 備用RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Global.list,PROXY

//結束
FINAL,DIRECT

[Host]
localhost = 127.0.0.1

[URL Rewrite]
^http://(www.)?g.cn https://www.google.com 302
^http://(www.)?google.cn https://www.google.com 302